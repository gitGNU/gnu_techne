#!/bin/bash

prefix=@prefix@
exec_prefix=@exec_prefix@
libdir=@libdir@
datarootdir=@datarootdir@
datadir=@datadir@

# Run through the list of arguments given
# and extract the ones that should be handled
# at this point.

args=""

while [ -n "$1" ]; do
    if [ "$1" = "--debug" ]; then
	debug=1
    elif [ "$1" = "--trace" ]; then
	debug=1
	commands="set confirm off\nrun\nbt\n"
    else
	args="$args $1"
    fi
    
    shift
done

if [ "$debug" -eq 1 -a -n "$commands" ]; then
    echo -e "$commands" | gdb -silent --args ${libdir}/techne/techne.bin -Oprefix=${datadir}/techne $args
elif [ "$debug" -eq 1 ]; then
    gdb -silent --args ${libdir}/techne/techne.bin -Oprefix=${datadir}/techne $args
else
    ${libdir}/techne/techne.bin -Oprefix=${datadir}/techne $args
fi
